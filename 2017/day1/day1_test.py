import pytest

from day1 import *

content = "5228833336355848549915459366737982598312959583817455621545976784792489468198365998232722734876612332352376192813552949814275947575774339529811976644361517795586998319242241614813622734255797569571577699238592667287428166398221572885869416419682687759743978434571821267146514338394624525648338739929479912368172669885577319718389278168766844487948761697438722556857882433224393723131298876252626643517236883999115665656935521675772866516185899317132494716723615\
493476397115627687887665194781746377341468995954554518252916859227397693885254329628812355612487594445522395853551734567498838382248616137969637971369615443599973588326388792893969924855316437952313492551671545714262784738343517166544197194547173515155927244175447296474282154114951181648317875827525814453758846194548872789943372281952995222779173812444186491115426476188672253249744478946863317915136832199132868917891243591195719354721129116229164688256853628339233919\
671468781913167415624214152793864585332944468428849171876873433621524242289488135675313544498245498637424139153782925723745249728743885493877792648576673196889949568317234125863369187953788611841388353999875519172896329524346527265231767868839696693328273381772726782949166112932954356923757485139367298699922984925977724972944277991686823219295939734313874834861796179591659174726432357533113896212781566659154939419866797488347448551719481632572231632463575591599696388\
223344219228325134233238538854289437756331848887242423387542214691157226725179683638967415678697625138177633444765126223885478348951332634398291612134852858683942466178329922655822225426534359191696177633167962839847985826676955417426617126288255366123169174674348417932158291334646767637764323226842771523598562429399935789788215958367362467652444854123951972118358417629679454978687337137675495295768451719631999398617828287671937584998697959425845883145736323818225129\
311845997214987663433375689621746665629187252511643969315283316269222835744532431378945137649959158495714472963839397214332815241141327714672141875129895"

content1 = "522883333635584854991545936673798259831295958381745562154597678479248946819836599823272273487661233235237619281355294981427594757577433952981197664436151779558699831924224161481362273425579756957157769923859266728742816639822157288586941641968268775974397843457182126714651433839462452564833873992947991236817266988557731971838927816876684448794876169743872255685788243322439372313129887625262664351723688399911566565693552167577286651618589931713249471672361\
549347639711562768788766519478174637734146899595455451825291685922739769388525432962881235561248759444552239585355173456749883838224861613796963797136961544359997358832638879289396992485531643795231349255167154571426278473834351716654419719454717351515592724417544729647428215411495118164831787582752581445375884619454887278994337228195299522277917381244418649111542647618867225324974447894686331791513683219913286891789124359119571935472112911622916468825685362833923391\
967146878191316741562421415279386458533294446842884917187687343362152424228948813567531354449824549863742413915378292572374524972874388549387779264857667319688994956831723412586336918795378861184138835399987551917289632952434652726523176786883969669332827338177272678294916611293295435692375748513936729869992298492597772497294427799168682321929593973431387483486179617959165917472643235753311389621278156665915493941986679748834744855171948163257223163246357559159969638\
822334421922832513423323853885428943775633184888724242338754221469115722672517968363896741567869762513817763344476512622388547834895133263439829161213485285868394246617832992265582222542653435919169617763316796283984798582667695541742661712628825536612316917467434841793215829133464676763776432322684277152359856242939993578978821595836736246765244485412395197211835841762967945497868733713767549529576845171963199939861782828767193758499869795942584588314573632381822512\
9311845997214987663433375689621746665629187252511643969315283316269222835744532431378945137649959158495714472963839397214332815241141327714672141875129895"


class TestNextDigitChecking(object):

    @pytest.fixture(scope="class")
    def resource_captcha(self):
        return CaptchaSolver()

    def test_for_empty_string_returns_zero(self, resource_captcha):
        assert self.resource_captcha().solve_using_next("") == 0

    def test_for_1122_returns_3(self, resource_captcha):
        assert self.resource_captcha().solve_using_next("1122") == 3

    def test_for_1111_returns_4(self, resource_captcha):
        assert self.resource_captcha().solve_using_next("1111") == 4

    def test_for_1234_returns_0(self, resource_captcha):
        assert self.resource_captcha().solve_using_next("1234") == 0

    def test_for_91212129_returns_9(self, resource_captcha):
        assert self.resource_captcha().solve_using_next("91212129") == 9

    def test_for_content_returns_right_anwser(self, resource_captcha):
        assert self.resource_captcha().solve_using_next(content) == 1216

class TestHalfSizeDigitChecking(object):

    @pytest.fixture(scope="function")
    def resource_captcha(self):
        return CaptchaSolver()

    def test_for_empty_string_returns_zero(self, resource_captcha):
        assert self.resource_captcha().solve_using_halfway("") == 0

    def test_for_1212_returns_6(self, resource_captcha):
        assert self.resource_captcha().solve_using_halfway("1212") == 6

    def test_for_1221_returns_0(self, resource_captcha):
        assert self.resource_captcha().solve_using_halfway("1221") == 0

    def test_for_123425_returns_4(self, resource_captcha):
        assert self.resource_captcha().solve_using_halfway("123425") == 4

    def test_for_123123_returns_12(self, resource_captcha):
        assert self.resource_captcha().solve_using_halfway("123123") == 12

    def test_for_12131415_returns_4(self, resource_captcha):
        assert self.resource_captcha().solve_using_halfway("12131415") == 4

    def test_for_content1_returns_right_answer(self, resource_captcha):
        assert self.resource_captcha().solve_using_halfway(content1) == 1072
